<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Study Adventure</title>
  <link rel="apple-touch-icon" href="icon-180.png">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <header class="top">
      <div class="topRow">
        <h1>Study Adventure</h1>

        <nav class="tabs" aria-label="tabs">
          <button class="tab active" data-tab="home">Home</button>
          <button class="tab" data-tab="story">Story</button>
        </nav>
      </div>

      <div class="hud" aria-label="hud">
        <div class="hudItem">TODAY <b id="todayMin">0分</b></div>
        <div class="hudItem">TOTAL <b id="totalMin">0分</b></div>
        <div class="hudItem">STREAK <b id="streak">0</b></div>
      </div>
    </header>

    <main>
      <!-- ===== Home ===== -->
      <section id="tab-home" class="tabPanel">
        <section class="card">
          <div class="row">
            <div>
              <div class="label">冒険の進捗</div>
              <div class="big"><b id="km">0.0</b> km</div>
              <div class="sub">次のエリアまで <b id="toNext">0</b> </div>
              <div class="sub">次のストーリーまで <b id="toNextStory">0</b> </div>
            </div>
            <div class="badge" id="areaBadge">Area 1</div>
          </div>

          <div class="barWrap" aria-label="progress">
            <div class="bar" id="bar"></div>
          </div>

          <div class="btnRow">
            <button id="startBtn" class="primary">Start</button>
            <button id="stopBtn" class="ghost" disabled>Stop</button>
            <button id="addBtn" class="ghost">+ 手入力</button>
          </div>

          <div class="hint" id="timerHint">未計測</div>
        </section>

        <section class="card">
          <div class="label">今日のログ</div>
          <div id="logList" class="logList"></div>

          <div class="logActions">
            <button id="resetTodayBtn" class="danger">今日をリセット</button>
            <button id="resetAllBtn" class="danger">全部リセット</button>

            <input type="file" id="importFile" accept="application/json" hidden>

            <button id="importBtn" class="ghost">インポート</button>
            <button id="exportBtn" class="ghost">書き出し</button>
          </div>
        </section>

        <section class="card">
          <div class="row">
            <div>
              <div class="label">今週の勉強</div>
              <div class="big">
  <b id="weekDone">0</b> / <b id="weekGoal">0</b>
</div>
              <div class="sub">月〜日</div>
              <div class="sub" id="weekProgress"></div>
            </div>
            <button id="editWeekGoalBtn" class="ghost">目標設定</button>
          </div>

          <div class="barWrap">
            <div class="bar" id="weekBar"></div>
          </div>
        </section>
      </section>

      <!-- ===== Story ===== -->
      <section id="tab-story" class="tabPanel hidden">
        <section class="card">
          <div class="row">
            <div>
              <div class="label">ストーリー</div>
              <div class="sub">勉強時間で解放。読んだらチェックがつく。</div>
            </div>
            <div class="badge" id="storyBadge">Unlocked 0</div>
          </div>

          <div id="storyList" class="storyList"></div>
        </section>
      </section>
    </main>

    <!-- 手入力 -->
    <dialog id="addDialog">
      <form method="dialog" class="dialog">
        <h2>手入力で追加</h2>

        <div class="field">
          時間と分
          <div class="hmRow">
            <input id="addHours" type="number" min="0" max="24" placeholder="時間" />
            <span>時間</span>
            <input id="addMins" type="number" min="0" max="59" placeholder="分" />
            <span>分</span>
          </div>
        </div>

        <label class="field">
          メモ(任意)
          <input id="addMemo" type="text" maxlength="60" placeholder="例:管理会計 章3" />
        </label>

        <menu class="menu">
          <button value="cancel" class="ghost">キャンセル</button>
          <button id="saveAddBtn" value="ok" class="primary">追加</button>
        </menu>
      </form>
    </dialog>

<dialog id="weekGoalDialog">
  <form method="dialog" class="dialog">
    <h2>週目標設定</h2>

    <div class="field">
      <div class="hmRow">
        <input id="goalHours" type="number" min="0" />
        <span>時間</span>
        <input id="goalMins" type="number" min="0" max="59" />
        <span>分</span>
      </div>
    </div>

    <menu class="menu">
      <button value="cancel" class="ghost">キャンセル</button>
      <button id="saveGoalBtn" class="primary">保存</button>
    </menu>
  </form>
</dialog>


    <!-- エリア解放 -->
    <dialog id="unlockDialog">
      <div class="dialog">
        <h2>エリア解放!</h2>
        <p id="unlockText"></p>
        <menu class="menu">
          <button id="closeUnlockBtn" class="primary">OK</button>
        </menu>
      </div>
    </dialog>

    <!-- ストーリー本文 -->
    <dialog id="storyDialog">
      <div class="dialog storyDialog">
        <div class="row">
          <h2 id="storyTitle" class="storyTitle">Episode</h2>
          <button id="closeStoryBtn" class="ghost">閉じる</button>
        </div>
        <div id="storyMeta" class="sub"></div>
        <div id="storyBody" class="storyBody"></div>
        <div id="choiceBox" class="choiceBox"></div>

        <menu class="menu">
          <button id="markReadBtn" class="primary">読了にする</button>
        </menu>
      </div>
    </dialog>
  </div>

  <script src="app.js"></script>
</body>
</html>
